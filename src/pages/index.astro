---
import BaseHead from '../components/BaseHead.astro';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';
import NewHero from '../components/NewHero.astro';
import Services from '../components/Services.astro';
import WhyUs from '../components/WhyUs.astro';
import Portfolio from '../components/Portfolio.astro';
import CTA from '../components/CTA.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body class="bg-white text-slate-900 font-sans antialiased">
		<Navbar />
		<main class="w-full min-h-screen flex flex-col">
			<NewHero />
			<Services />
			<WhyUs />
			<Portfolio />
			<CTA />
		</main>
		<Footer />
		
		<script>
			function waitForGSAP(callback) {
				if (typeof window !== 'undefined' && window.gsap && window.ScrollTrigger && window.ScrollToPlugin) {
					callback();
				} else {
					setTimeout(() => waitForGSAP(callback), 50);
				}
			}

			function initAnimations() {
				gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);
				
				// Smooth scroll for anchor links
				document.querySelectorAll('a[href^="#"]').forEach(anchor => {
					anchor.addEventListener('click', function (e) {
						e.preventDefault();
						const target = document.querySelector(this.getAttribute('href'));
						if (target) {
							gsap.to(window, {
								duration: 1,
								scrollTo: {
									y: target,
									offsetY: 80
								},
								ease: 'power2.inOut'
							});
						}
					});
				});
				
				// Parallax effect for hero blur elements
				window.addEventListener('scroll', () => {
					const scrolled = window.scrollY;
					const heroBlur1 = document.querySelector('.hero-blur-1');
					const heroBlur2 = document.querySelector('.hero-blur-2');
					
					if (heroBlur1) {
						gsap.to(heroBlur1, {
							y: scrolled * 0.3,
							duration: 0.1,
							ease: 'none'
						});
					}
					
					if (heroBlur2) {
						gsap.to(heroBlur2, {
							y: -scrolled * 0.2,
							duration: 0.1,
							ease: 'none'
						});
					}
				});
			}

			if (document.readyState === 'loading') {
				document.addEventListener('DOMContentLoaded', () => {
					waitForGSAP(initAnimations);
				});
			} else {
				waitForGSAP(initAnimations);
			}
		</script>
	</body>
</html>

