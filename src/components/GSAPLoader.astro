---
// This component loads GSAP and makes it available globally
---

<script>
	import { gsap } from 'gsap';
	import { ScrollTrigger } from 'gsap/ScrollTrigger';
	import { ScrollToPlugin } from 'gsap/ScrollToPlugin';
	
	gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);
	
	if (typeof window !== 'undefined') {
		window.gsap = gsap;
		window.ScrollTrigger = ScrollTrigger;
		window.ScrollToPlugin = ScrollToPlugin;
		
		// Batch ScrollTrigger refreshes to reduce reflows
		let refreshTimeout;
		const originalRefresh = ScrollTrigger.refresh;
		ScrollTrigger.refresh = function() {
			clearTimeout(refreshTimeout);
			refreshTimeout = setTimeout(() => {
				requestAnimationFrame(() => {
					originalRefresh.call(this);
				});
			}, 10);
		};
	}
</script>



